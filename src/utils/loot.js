
// ç™»å…¥èˆ‡å†’éšªä½¿ç”¨ç›¸åŒæŽ‰è½è¡¨ï¼›
// æ³¨æ„ï¼šåŽŸå§‹å æ¯”åˆè¨ˆ 90%ï¼Œæ­¤è™•ç­‰æ¯”æ­£è¦åŒ–ã€‚
// è½‰ç‚ºæ¬Šé‡ï¼šæ™®é€š 7000, ç²¾è‰¯ 1500, å²è©© 400, å‚³èªª 100 â†’ æ­£è¦åŒ–åˆ° 10000ã€‚

const COMMON_ITEMS = [
  'ðŸ”¥ç«ç„°çš„é ­ç›”','ðŸ”¥ç«ç„°çš„è­·ç”²','ðŸ”¥ç«ç„°çš„éž‹å­','ðŸ”¥ç«ç„°çš„çŸ­åŠ','ðŸ”¥ç«ç„°çš„é•·åŠ','ðŸ”¥ç«ç„°çš„å¼“ç®­','ðŸ”¥ç«ç„°çš„æˆ’æŒ‡',
  'â„ï¸å¯’å†°çš„é ­ç›”','â„ï¸å¯’å†°çš„è­·ç”²','â„ï¸å¯’å†°çš„éž‹å­','â„ï¸å¯’å†°çš„çŸ­åŠ','â„ï¸å¯’å†°çš„é•·åŠ','â„ï¸å¯’å†°çš„å¼“ç®­','â„ï¸å¯’å†°çš„æˆ’æŒ‡',
  'âš¡é›·é›»çš„é ­ç›”','âš¡é›·é›»çš„è­·ç”²','âš¡é›·é›»çš„éž‹å­','âš¡é›·é›»çš„çŸ­åŠ','âš¡é›·é›»çš„é•·åŠ','âš¡é›·é›»çš„å¼“ç®­','âš¡é›·é›»çš„æˆ’æŒ‡',
  'ðŸŒ±å¤§åœ°çš„é ­ç›”','ðŸŒ±å¤§åœ°çš„è­·ç”²','ðŸŒ±å¤§åœ°çš„éž‹å­','ðŸŒ±å¤§åœ°çš„çŸ­åŠ','ðŸŒ±å¤§åœ°çš„é•·åŠ','ðŸŒ±å¤§åœ°çš„å¼“ç®­','ðŸŒ±å¤§åœ°çš„æˆ’æŒ‡',
  'ðŸ˜ˆæƒ¡é­”çš„é ­ç›”','ðŸ˜ˆæƒ¡é­”çš„è­·ç”²','ðŸ˜ˆæƒ¡é­”çš„éž‹å­','ðŸ˜ˆæƒ¡é­”çš„çŸ­åŠ','ðŸ˜ˆæƒ¡é­”çš„é•·åŠ','ðŸ˜ˆæƒ¡é­”çš„å¼“ç®­','ðŸ˜ˆæƒ¡é­”çš„æˆ’æŒ‡',
  'âœ¨ç¥žè–çš„é ­ç›”','âœ¨ç¥žè–çš„è­·ç”²','âœ¨ç¥žè–çš„éž‹å­','âœ¨ç¥žè–çš„çŸ­åŠ','âœ¨ç¥žè–çš„é•·åŠ','âœ¨ç¥žè–çš„å¼“ç®­','âœ¨ç¥žè–çš„æˆ’æŒ‡',
  'ðŸŒ‘é»‘æš—çš„é ­ç›”','ðŸŒ‘é»‘æš—çš„è­·ç”²','ðŸŒ‘é»‘æš—çš„éž‹å­','ðŸŒ‘é»‘æš—çš„çŸ­åŠ','ðŸŒ‘é»‘æš—çš„é•·åŠ','ðŸŒ‘é»‘æš—çš„å¼“ç®­','ðŸŒ‘é»‘æš—çš„æˆ’æŒ‡'
];

const UNCOMMON_ITEMS = [
  'ðŸ‘‘é­”å°ŽçŽ‹çš„é ­ç›”','ðŸ‘‘é­”å°ŽçŽ‹çš„è­·ç”²','ðŸ‘‘é­”å°ŽçŽ‹çš„éž‹å­','ðŸ‘‘é­”å°ŽçŽ‹çš„çŸ­åŠ','ðŸ‘‘é­”å°ŽçŽ‹çš„é•·åŠ','ðŸ‘‘é­”å°ŽçŽ‹çš„å¼“ç®­','ðŸ‘‘é­”å°ŽçŽ‹çš„æˆ’æŒ‡',
  'ðŸ‘‘é¨Žå£«çŽ‹çš„é ­ç›”','ðŸ‘‘é¨Žå£«çŽ‹çš„è­·ç”²','ðŸ‘‘é¨Žå£«çŽ‹çš„éž‹å­','ðŸ‘‘é¨Žå£«çŽ‹çš„çŸ­åŠ','ðŸ‘‘é¨Žå£«çŽ‹çš„é•·åŠ','ðŸ‘‘é¨Žå£«çŽ‹çš„å¼“ç®­','ðŸ‘‘é¨Žå£«çŽ‹çš„æˆ’æŒ‡',
  'ðŸ‘‘ç²¾éˆçŽ‹çš„é ­ç›”','ðŸ‘‘ç²¾éˆçŽ‹çš„è­·ç”²','ðŸ‘‘ç²¾éˆçŽ‹çš„éž‹å­','ðŸ‘‘ç²¾éˆçŽ‹çš„çŸ­åŠ','ðŸ‘‘ç²¾éˆçŽ‹çš„é•·åŠ','ðŸ‘‘ç²¾éˆçŽ‹çš„å¼“ç®­','ðŸ‘‘ç²¾éˆçŽ‹çš„æˆ’æŒ‡'
];

const EPIC_ITEMS = [
  'ðŸºé å¤çš„é ­ç›”','ðŸºé å¤çš„è­·ç”²','ðŸºé å¤çš„éž‹å­','ðŸºé å¤çš„çŸ­åŠ','ðŸºé å¤çš„é•·åŠ','ðŸºé å¤çš„å¼“ç®­','ðŸºé å¤çš„æˆ’æŒ‡',
  'ðŸ›¸æœªä¾†çš„é ­ç›”','ðŸ›¸æœªä¾†çš„è­·ç”²','ðŸ›¸æœªä¾†çš„éž‹å­','ðŸ›¸æœªä¾†çš„çŸ­åŠ','ðŸ›¸æœªä¾†çš„é•·åŠ','ðŸ›¸æœªä¾†çš„å¼“ç®­','ðŸ›¸æœªä¾†çš„æˆ’æŒ‡'
];

const LEGEND_ITEMS = [
  'ðŸŒ³ä¸–ç•Œæ¨¹çš„é ­ç›”','ðŸŒ³ä¸–ç•Œæ¨¹çš„è­·ç”²','ðŸŒ³ä¸–ç•Œæ¨¹çš„éž‹å­','ðŸŒ³ä¸–ç•Œæ¨¹çš„çŸ­åŠ','ðŸŒ³ä¸–ç•Œæ¨¹çš„é•·åŠ','ðŸŒ³ä¸–ç•Œæ¨¹çš„å¼“ç®­','ðŸŒ³ä¸–ç•Œæ¨¹çš„æˆ’æŒ‡'
];

// æ¬Šé‡æ­£è¦åŒ–ï¼šåŽŸå§‹ 7000:1500:400:100 â†’ ä¾æ¯”ä¾‹æ”¾å¤§åˆ° 10000ï¼ˆå¯¦éš›ç¸½å’Œå³ 9000ï¼‰
const LOGIN_LOOT_TABLE = [
  { rarity: 'æ™®é€š', weight: 7000, items: COMMON_ITEMS },
  { rarity: 'ç²¾è‰¯', weight: 1500, items: UNCOMMON_ITEMS },
  { rarity: 'å²è©©', weight:  400, items: EPIC_ITEMS },
  { rarity: 'å‚³èªª', weight:  100, items: LEGEND_ITEMS }
];

function drawFromLootTable(table) {
  const total = table.reduce((a, r) => a + r.weight, 0);
  let r = Math.floor(Math.random() * total) + 1;
  for (const row of table) {
    if (r <= row.weight) {
      const name = row.items[Math.floor(Math.random() * row.items.length)];
      return { rarity: row.rarity, name };
    }
    r -= row.weight;
  }
  const fallback = table[0];
  return { rarity: fallback.rarity, name: fallback.items[0] };
}

module.exports = { LOGIN_LOOT_TABLE, drawFromLootTable };
